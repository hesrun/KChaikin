<!doctype html>
<html lang="ru">
@include('modules/link.html',{ 'title': 'Main' })

<body>
    @include('modules/header.html',{'theme':'black'})
    <main class="main">
        <div class="page-section">
            <div class="venus-hero">
                <div class="container">
                    <div class="venus-hero__header">
                        <h1 class="venus-hero__title playfair">VENUS</h1>
                        <h5 class="venus-hero__subtitle playfair">ЛИМИТИРОВАННАЯ СЕРИЯ</h5>
                        <div class="venus-hero__age playfair">
                            18+
                        </div>
                    </div>
                    <div class="venus-hero__image-wrapper">
                        <div class="venus-hero__watch">
                            <div class="venus-hero__watch-body">
                                <img src="img/venus/perl-watch.webp" alt="">
                            </div>
                            <img class="venus-hero__watch-back" src="img/venus/perl-back.webp" alt="">
                            <img class="venus-hero__watch-front" src="img/venus/perl-front.webp" alt="">
                        </div>
                        <div class="venus-hero__bg">
                            <img src="img/venus/bg-1.webp" alt="">
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <h2 class="venus-section-title text-center playfair split-text-by-word animate-words">
                    Новая звезда <br>
                    восходит на небосклон Вселенной ристмонов
                </h2>
                <div class="venus-lg-text gsap-fade-in-up">
                    <p>“Венус” — символический образ Венеры, переложенный на язык фирменной джокер-индикации.</p>
                </div>
                <div class="venus-collpase">
                    <div class="venus-collpase__content">
                        <div class="venus-text-cols">
                            <div>
                                <p>
                                    Идея подобных часов родилась у Константина Чайкина еще в 2018 году, вскоре после
                                    появления самого первого «Джокера» –
                                    «родоначальника» знаковой антропоморфной коллекции ристмонов.</p>
                                <p>
                                    Тогда мастер задумал модель «Матрешка», где центральной темой должен был стать
                                    женский персонаж, а ключевой деталью –
                                    запатентованный сферический указатель фазы Луны. Однако эта концепция так и не была
                                    воплощена в жизнь, оставшись у
                                    мастера в виде эскизов.
                                </p>
                                <p>
                                    В июне 2023 года, пересматривая архивные наброски, Константин Чайкин вернулся к
                                    задумке, увидев в ней нереализованный
                                    потенциал.
                                </p>
                            </div>
                            <div>
                                <p>
                                    Сохранив индикацию фаз Луны как ключевой элемент архитектуры часов, он сменил
                                    главную
                                    героиню: отправной точкой
                                    вдохновения стала Венера, в римской мифологии почитаемая как богиня любви,
                                    плодородия и процветания.
                                </p>
                                <p>
                                    Так началась работа над ристмоном «Венус». Облик этих часов прежде всего вызывает
                                    ассоциации со знаменитым полотном
                                    Сандро Боттичелли «Рождение Венеры». Сюжет картины повествует о появлении богини из
                                    морской пены, запечатлевая момент,
                                    когда абстрактная идея красоты обретает форму.
                                </p>
                                <p>
                                    Благодаря выразительности силуэта обнаженная фигура так и не обретает телесность,
                                    превращаясь в исток первозданной
                                    красоты.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="venus-collpase__action">
                        <button class="button button_black button_full">Читать далее</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-section">
            <div class="container">
                <h2 class="venus-section-title text-center playfair split-text-by-word animate-words">
                    Циферблат как <br>
                    живописное <br>
                    произведение 
                </h2>
                <div class="venus-watch-type-one">
                    <img class="venus-watch-type-one__watch" src="img/venus/watch-2.webp" alt="">
                    <div class="venus-watch-type-one__bg">
                        <img src="img/venus/bg-2.webp" alt="">
                    </div>
                </div>
                <div class="venus-collpase">
                    <div class="venus-collpase__content">
                        <div class="venus-text-cols">
                            <div>
                                <p>Циферблат «Венус» заметно отличается от большинства других ристмонов Константина
                                    Чайкина. Он выполнен в минималистичном
                                    ключе, за счет чего эмоциональное воздействие только усиливается.</p>
                                <p>В интерпретации мастера Венера в буквальном смысле становится луноликой. Указатель
                                    фазы Луны превращается в лицо,
                                    прописанное несколькими штрихами в духе Пабло Пикассо.</p>
                            </div>
                            <div>
                                <p>Двухцветные индикаторы по традиции отображают время: слева читаются часы, справа
                                    минуты. Женский силуэт заполняет все
                                    пространство циферблата, покрытого теплым оранжево-розовым лаком. В том же тоне
                                    решен фон лунного диска, тогда как
                                    лунная тень выполнена темно-синим цветом.</p>
                                <p>Лик богини нанесен с внутренней стороны сапфирового стекла. Волосы же «прорисованы»
                                    волнистым, расходящимся к краям,
                                    рельефным узором «гильоше». Завершающая деталь – логотип мануфактуры,
                                    трансформирующийся в подвеску на шее. </p>
                            </div>
                        </div>
                    </div>
                    <div class="venus-collpase__action">
                        <button class="button button_black button_full">Читать далее</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-section">
            <div class="venus-symbol">
                <div class="venus-symbol__side-text playfair">
                    <span>v</span>
                    <span>e</span>
                    <span>n</span>
                    <span>u</span>
                    <span>s</span>
                </div>
                <div class="container">
                    <div class="venus-symbol__content">
                        <div class="venus-symbol__circle-part">
                            <div class="venus-model-loader">
                                <div class="venus-model-loader__content">
                                    <div class="venus-model-loader__text playfair">
                                        ЗАГРУЗКА
                                    </div>
                                    <div class="venus-model-loader__bar">
                                        <div class="venus-model-loader__bar-inner"></div>
                                    </div>
                                    <div class="venus-model-loader__percents">56 %</div>
                                </div>
                            </div>
                            <div class="venus-symbol__watch" id="viewer">
                                <canvas id="scene"></canvas>
                            </div>
                            <svg class="venus-symbol__circle-text" viewBox="0 0 100 100"
                                xmlns="http://www.w3.org/2000/svg">
                                <path id="circlePath" fill="none" d="
                                  M 10, 50
                                  a 40,40 0 1,1 80,0
                                  40,40 0 1,1 -80,0
                                " />
                                <text>
                                    <textPath href="#circlePath">
                                        ВРАЩАТЬ МЕДЛЕННО
                                    </textPath>
                                </text>
                            </svg>

                        </div>
                        <div class="venus-symbol__cross-part">
                        </div>
                        <div class="venus-symbol__three">
                            <img src="img/venus/three.webp" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-section">
            <div class="container">
                <h2 class="venus-section-title text-center playfair split-text-by-word animate-words">
                    Чистые линии силуэта <br> луноликой Венеры
                </h2>
                <div class="gsap-fade-in-up">
                    Конструкция корпуса часов «Венус» отличается от классических ристмонов. В глаза сразу бросается
                    гладкий узкий безель.
                    Такое решение продиктовано эргономикой: чтобы сохранить легкую читаемость циферблата и пропорции
                    фигуры, его сделали
                    более изящным и отказались от привычного рельефа. Полностью переработан и модуль джокер-индикации.
                    Указатель фаз Луны,
                    который в других ристмонах играет роль улыбки, здесь становится лицом Венеры, поэтому диск сделан
                    крупнее и совершает
                    полный оборот за 29,5 дня вместо привычных 59. 
                </div>
                <div class="venus-parallax move-paralax">
                    <img class="venus-parallax__venera" src="img/venus/bust.webp" alt="">
                    <img class="venus-parallax__watch" src="img/venus/watch-3.webp" alt="">
                </div>
                <div class="gsap-fade-in-up">
                    <p>Еще одно заметное отличие от традиционного дизайна ристмонов – отсутствие второй корректирующей
                        заводной головки: в
                        «Венус» сохранилась только одна головка на отметке «три часа», что поддерживает цельность
                        женственного силуэта на
                        циферблате.</p>
                    <p>
                        В автоматическом калибре K.18-25, которым оснащены часы «Венус», используется модифицированный
                        механизм G200 швейцарской
                        фабрики La Joux-Perret — он выбран за стабильность хода, надёжную конструкцию баланса и солидный
                        68-часовой запас хода.
                        На его базе установлен полностью разработанный мануфактурой «Константин Чайкин» модуль
                        джокер-индикации, выполненный по
                        стандартам высокого часового искусства.
                    </p>
                </div>
            </div>
        </div>
        <div class="page-section">
            <div class="container">
                <div class="shell-icon gsap-fade-in-up">
                    <img src="img/venus/shell.webp" alt="">
                </div>
                <h2 class="venus-section-title text-center playfair split-text-by-word animate-words">
                    СПЕЦИФИКАЦИЯ
                </h2>
                <div class="venus-lg-text gsap-fade-in-up">
                    <p>Лимитированная серия из 99 экземпляров. Выпущено совместно с официальным ритейлером в Италии –
                        GMT Milano.</p>
                </div>
                <div class="venus-specification-image">
                    <img src="img/venus/watch-4.webp" alt="">
                    <div class="venus-specification-image__bg">
                        <img src="img/venus/bg-3.webp" alt="">
                    </div>
                </div>
                <table class="venus-specification-table">
                    <tr>
                        <td>Калибр</td>
                        <td>K.18-25 с автоматическим заводом </td>
                    </tr>
                    <tr>
                        <td>Модуль джокер-индикации</td>
                        <td>Производства мануфактуры «Константин Чайкин» </td>
                    </tr>
                    <tr>
                        <td>Базовый механизм </td>
                        <td>La Joux-Perret G200 швейцарского производства, модифицированный для мануфактуры «Константин
                            Чайкин», диаметр 34,5 мм,
                            толщина 7,9 мм (с модулем), 28’800 полуколебаний в час, 30 камней (базовый механизм – 24,
                            модуль – 6), запас хода 68
                            часов </td>
                    </tr>
                    <tr>
                        <td>Функции</td>
                        <td>Художественный вариант джокер-индикации времени с дисковыми указателями часов, минут и фазы
                            Луны </td>
                    </tr>
                    <tr>
                        <td>Корпус</td>
                        <td>Из нержавеющей стали, диаметр 40 мм, толщина 12,9 мм, задняя крышка с сапфировым окном
                            прикреплена 6 винтами </td>
                    </tr>
                    <tr>
                        <td>Часовое стекло </td>
                        <td>Сапфировое стекло с просветляющим покрытием, диаметр 34,5 мм, сапфировое стекло задней
                            крышки корпуса с просветляющим
                            покрытием, диаметр 25,5 мм </td>
                    </tr>
                    <tr>
                        <td>Отделка циферблата </td>
                        <td>Абразивно-струйная обработка разных фракций, рельефный декор «гильоше», многослойное лаковое
                            покрытие, прецизионная
                            тампонная печать маркеров и логотипа, линза в апертуре указателя фазы Луны </td>
                    </tr>
                    <tr>
                        <td>Ремешок и застежка</td>
                        <td>Эксклюзивный из высококачественной кожи, с классической застежкой из нержавеющей
                            стали производства
                            мануфактуры «Константин Чайкин»</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="page-section">
            <div class="container">
                <h2 class="venus-section-title text-center playfair split-text-by-word animate-words">
                    ФОТОГАЛЕРЕЯ
                </h2>
                <div class="venus-gallery">
                    <div class="venus-gallery__image">
                        <img src="img/venus/gallery-5.webp" alt="">
                    </div>
                    <div class="venus-gallery__image">
                        <img src="img/venus/gallery-6.webp" alt="">
                    </div>
                    <div class="venus-gallery__image">
                        <img src="img/venus/gallery-3.webp" alt="">
                    </div>
                    <div class="venus-gallery__image">
                        <img src="img/venus/gallery-1.webp" alt="">
                    </div>
                    <div class="venus-gallery__image">
                        <img src="img/venus/gallery-4.webp" alt="">
                    </div>
                    <div class="venus-gallery__image">
                        <img src="img/venus/gallery-2.webp" alt="">
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="https://unpkg.com/three@0.140.0/build/three.min.js"></script>
    <script src="https://unpkg.com/three@0.140.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://unpkg.com/three@0.140.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://unpkg.com/three@0.140.0/examples/js/loaders/RGBELoader.js"></script>

    <script>
        const loaderBlock = document.querySelector('.venus-model-loader');
        const loaderBar = document.querySelector('.venus-model-loader__bar-inner');
        const loaderPerc = document.querySelector('.venus-model-loader__percents');
        const container = document.getElementById('viewer');
        const canvas = document.getElementById('scene');

        // Сцена
        const scene = new THREE.Scene();

        // Камера (фиксированный FOV!)
        const camera = new THREE.PerspectiveCamera(10, container.clientWidth / container.clientHeight, 0.1, 1000);
        camera.position.set(0, 0, 2);

        // Рендерер
        const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.outputEncoding = THREE.sRGBEncoding;

        // Контролы
        const controls = new THREE.OrbitControls(camera, renderer.domElement);

        controls.enableZoom = false;
        controls.enablePan = false;
        controls.enableDamping = true;
        controls.autoRotate = true;
        controls.autoRotateSpeed = 1.0;


        // HDRI
        const textureLoader = new THREE.TextureLoader();
        textureLoader.load('/static/model/bg.png', pngTexture => {
            pngTexture.mapping = THREE.EquirectangularReflectionMapping;
            const pmremGenerator = new THREE.PMREMGenerator(renderer);
            scene.environment = pmremGenerator.fromEquirectangular(pngTexture).texture;
            pmremGenerator.dispose();
        });

        // Свет
        const dir1 = new THREE.DirectionalLight(0xffffff, 1);
        dir1.position.set(0, 60, 70);
        scene.add(dir1);

        const dir2 = new THREE.DirectionalLight(0xffffff, 0.5);
        dir2.position.set(0, -50, 40);
        scene.add(dir2);


        // ============================================================
        // Центрирование модели внутри группы
        // ============================================================
        const group = new THREE.Group();
        scene.add(group);

        let watch = null;

        // ----------------------------------------
        // АДАПТИВНЫЙ offset — модель крупнее в мобиле
        // ----------------------------------------
        function getOffset() {
            if (window.innerWidth < 480) return 1.20; // маленькие телефоны
            if (window.innerWidth < 768) return 1.30; // обычные телефоны
            return 1.50; // ПК
        }

        function fitCameraToObject(camera, object, offset = 1.5) {
            const box = new THREE.Box3().setFromObject(object);
            const size = box.getSize(new THREE.Vector3());
            const center = box.getCenter(new THREE.Vector3());

            const maxDim = Math.max(size.x, size.y, size.z);

            const fov = camera.fov * (Math.PI / 180);
            let cameraZ = (maxDim / 2) / Math.tan(fov / 2);
            cameraZ *= offset;

            camera.position.set(center.x, center.y, cameraZ + center.z);
            camera.lookAt(center);

            controls.target.copy(center);
            controls.update();

            camera.updateProjectionMatrix();
        }

        // -----------------------------
        // Функция смещения камеры (орбита)
        // -----------------------------

        function rotateCameraAroundTarget(camera, controls, angleX, angleY) {
            const target = controls.target;
            const r = camera.position.distanceTo(target);

            camera.position.x = target.x + r * Math.sin(angleY) * Math.cos(angleX);
            camera.position.y = target.y + r * Math.sin(angleX);
            camera.position.z = target.z + r * Math.cos(angleY) * Math.cos(angleX);

            camera.lookAt(target);
            controls.update();
        }


        // Загрузка модели
        const loader = new THREE.GLTFLoader();

        loader.load(
            '/static/model/model.glb',

            // === УСПЕШНАЯ ЗАГРУЗКА ===
            gltf => {
                // скрываем лоадер
                loaderBlock.style.opacity = '0';
                loaderBlock.style.pointerEvents = 'none';
                setTimeout(() => loaderBlock.style.display = 'none', 300);

                watch = gltf.scene;

                // центрируем
                const box = new THREE.Box3().setFromObject(watch);
                const center = box.getCenter(new THREE.Vector3());
                watch.position.sub(center);

                // добавляем
                group.add(watch);

                // ставим камеру
                fitCameraToObject(camera, group, getOffset());

                // стартовый угол
                rotateCameraAroundTarget(camera, controls, -0.4, -0.4);

                needsRender = true;
            },

            // === ПРОГРЕСС ===
            xhr => {
                if (xhr.lengthComputable) {
                    const percent = Math.min(100, Math.round((xhr.loaded / xhr.total) * 100));
                    loaderPerc.textContent = percent + ' %';
                    loaderBar.style.width = percent + '%';
                }
            },

            // === ОШИБКА ===
            err => {
                console.error('Ошибка загрузки модели:', err);
                loaderPerc.textContent = 'Ошибка загрузки';
            }
        );


        // Анимация
        let needsRender = true;

        function animate() {
            requestAnimationFrame(animate);

            controls.update();

            if (controls.autoRotate) needsRender = true;

            if (needsRender) {
                renderer.render(scene, camera);
                needsRender = false;
            }
        }

        controls.addEventListener('change', () => needsRender = true);
        animate();

        // Адаптивность
        let lastWidth = container.clientWidth;
        function onWindowResize() {
            const width = container.clientWidth;
            if (width === lastWidth) return;
            lastWidth = width;

            const height = container.clientHeight;

            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);

            if (watch) {
                fitCameraToObject(camera, group, getOffset());
                rotateCameraAroundTarget(camera, controls, -0.4, -0.4);
            }
        }

        window.addEventListener('resize', onWindowResize);


    </script>
    @include('modules/footer.html')
    @include('modals/techParamsModal.html')
    @include('modals/videoModal.html')
</body>

</html>