<!doctype html>
<html lang="ru">

<head>
   <meta charset="UTF-8" />
   <meta http-equiv="X-UA-Compatible" content="ie=edge" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <link rel="icon" href="img/favicon.png" type="image/png" />
   <meta name="description" content="description" />
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/23.0.10/css/intlTelInput.css" />
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.css" />
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" />
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.2/jquery.modal.css" />
   <link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icons/7.1.0/css/flag-icons.min.css" rel="stylesheet" />
   <link href="
    https://cdn.jsdelivr.net/npm/air-datepicker@3.6.0/air-datepicker.min.css
    " rel="stylesheet">
   <!-- -------------------------------- icons -------------------------------- -->
   <link href="https://cdn.iconly.io/kits/KIze4AZ1VXv8/v_fa5f91b/iconly.min.css" rel="stylesheet" integrity="sha384-EsWR6VEmpEF8YWYFY9SGV6ME/QbbJXc+TdO9G4jFafDdA6X5axsCCJDl2MdQFK2G" crossorigin="anonymous" />
   <!-- ------------------------------ icons end ------------------------------ -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.css" integrity="sha512-rd0qOHVMOcez6pLWPVFIv7EfSdGKLt+eafXh4RO/12Fgr41hDQxfGvoi1Vy55QIVcQEujUE1LQrATCLl2Fs+ag==" crossorigin="anonymous" referrerpolicy="no-referrer" />
   <link rel="stylesheet" href="css/style.min.css" />
   <title>Main</title>
</head>

<body>
   <header class="header header_black ">
      <div class="container">
         <button class="header-burger">
            <div class="header-burger__lines"></div>
            <div class="header-burger__text">Меню</div>
         </button>
         <picture class="header__retailer" style="display: none;">
            <source media="(min-width:600px)" srcset="img/logos/indep-retailer.svg">
            <img src="img/logos/indep-retailer-sm.svg" alt="independence">
         </picture>
         <a href="#" class="header__logo"> </a>
         <div class="header__tools">
            <a href="" class="header__tools-link header__tools-link_cart">
               <i class="icon-shopping-bag"></i>
               <span class="header__cart-text">Корзина</span>
               <span class="header__cart-badge">5</span>
            </a>
            <a href="" class="header__tools-link header__tools-link_user">
               <i class="icon-user"></i>
            </a>
            <div class="header__search">
               <form id="searchForm" class="header__search-form">
                  <input class="header__search-input" type="text" name="" id="" placeholder="Я хочу найти..." />
                  <div class="header__search-drop">
                     <div class="search-result">
                        <a href="" class="search-result__item">
                           <div class="search-result__product">
                              <img src="img/shop/shop-item-1.jpg" alt="" class="search-result__product-img" />
                              <div class="search-result__product-info">
                                 <div class="search-result__product-series">
                                    JOKER SKELETON
                                 </div>
                                 <div class="search-result__product-price">
                                    18 700 ₽
                                 </div>
                              </div>
                           </div>
                           <div class="search-result__type">
                              LONG-SLEEVED T-SHIRT
                           </div>
                        </a>
                        <a href="" class="search-result__item">
                           <div class="search-result__product">
                              <img src="img/shop/shop-item-1.jpg" alt="" class="search-result__product-img" />
                              <div class="search-result__product-info">
                                 <div class="search-result__product-series">
                                    JOKER SKELETON
                                 </div>
                                 <div class="search-result__product-price">
                                    18 700 ₽
                                 </div>
                              </div>
                           </div>
                           <div class="search-result__type">часы</div>
                        </a>
                        <a href="" class="search-result__item">
                           <div class="search-result__category">
                              Наручные часы
                           </div>
                           <div class="search-result__type">Категория</div>
                        </a>
                        <a href="" class="search-result__item">
                           <div class="search-result__category">
                              Футболки
                           </div>
                           <div class="search-result__type">Категория</div>
                        </a>
                     </div>
                     <span class="header__popular-title">
                            Популярные запросы
                            <i></i>
                        </span>
                     <div class="header__popular-list">
                        <a href="">Ристмоны</a>
                        <a href="">Ристмоны</a>
                        <a href="">Ристмоны</a>
                        <a href="">Ристмоны</a>
                        <a href="">Ристмоны</a>
                        <a href="">Ристмоны</a>
                        <a href="">Ристмоны</a>
                        <a href="">Ристмоны</a>
                     </div>
                  </div>
                  <button type="submit" class="header__search-submit">
                     <i class="icon-search"></i>
                  </button>
               </form>
               <button id="searchOpen" class="header__search-btn">
                  <i class="icon-search"></i>
               </button>
            </div>
            <div class="language-select">
               <div class="language-select__current">
                  US
                  <i class="icon icon-arrow-down"></i>
               </div>
               <div class="language-select__drop">
                  <a href="" class="language-select__item">English</a>
                  <a href="" class="language-select__item">Russian</a>
                  <a href="" class="language-select__item">Czech</a>
               </div>
            </div>
         </div>
      </div>
      <div id="menu" class="navigation">
         <div class="container">
            <div class="navigation__head">
               <a href="" class="navigation__account">
                  <i class="icon-user"></i>
               </a>
            </div>
            <nav class="main-nav">
               <div class="main-nav__cols">
                  <ul class="main-nav__list">
                     <li class="main-nav__list-item">
                        <a href="" class="main-nav__link">Новинки</a>
                     </li>
                     <li class="main-nav__list-item ">
                        <span class="main-nav__link main-nav__link_has-sub">
                                Коллекции
                                <div class="main-nav__curves"></div>
                            </span>
                        <ul class="main-nav__sub-list">
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Ристмоны</a>
                           </li>
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Космическая программа</a>
                           </li>
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Интерьерные часы</a>
                           </li>
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Уникальные часы</a>
                           </li>
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Классически часы</a>
                           </li>
                        </ul>
                     </li>
                     <li class="main-nav__list-item">
                        <a href="" class="main-nav__link">Все часы</a>
                     </li>
                     <li class="main-nav__list-item">
                        <a href="" class="main-nav__link">Исторические шедевры</a>
                     </li>
                     <li class="main-nav__list-item">
                        <a href="" class="main-nav__link">Ателье</a>
                     </li>
                     <li class="main-nav__list-item main-nav__list-item_hide-desk">
                        <span class="main-nav__link main-nav__link_has-sub">
                                МАНУФАКТУРА
                                <div class="main-nav__curves"></div>
                            </span>
                        <ul class="main-nav__sub-list">
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">О мануфактуре </a>
                           </li>
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Константин Чайкин </a>
                           </li>
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Философия</a>
                           </li>
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Изобретения</a>
                           </li>
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Вакансии</a>
                           </li>
                        </ul>
                     </li>
                     <li class="main-nav__list-item main-nav__list-item_hide-desk">
                        <span class="main-nav__link main-nav__link_has-sub">
                                СМИ
                                <div class="main-nav__curves"></div>
                            </span>
                        <ul class="main-nav__sub-list">
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Новости</a>
                           </li>
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Блог</a>
                           </li>
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Медиатека</a>
                           </li>
                        </ul>
                     </li>
                     <li class="main-nav__list-item main-nav__list-item_hide-desk">
                        <span class="main-nav__link main-nav__link_has-sub">
                                ДЛЯ КЛИЕНТОВ
                                <div class="main-nav__curves"></div>
                            </span>
                        <ul class="main-nav__sub-list">
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Как купить?</a>
                           </li>
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Сервис</a>
                           </li>
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Ритейлеры</a>
                           </li>
                           <li class="main-nav__sub-list-item">
                              <a href="" class="main-nav__sub-link">Клуб Чайкина</a>
                           </li>
                        </ul>
                     </li>
                  </ul>
                  <ul class="main-nav__list">
                     <li class="main-nav__list-item">
                        <a href="" class="main-nav__link">PRE-OWNED</a>
                     </li>
                     <li class="main-nav__list-item">
                        <a href="" class="main-nav__link">JOKER CLUB</a>
                     </li>
                     <li class="main-nav__list-item">
                        <a href="" class="main-nav__link">ГАЛЕРЕЯ ЧАЙКИН</a>
                     </li>
                  </ul>
               </div>
            </nav>
            <div class="secondary-nav">
               <div class="secondary-nav__links-col">
                  <div class="secondary-nav__col">
                     <div class="secondary-nav__title">МАНУФАКТУРА</div>
                     <div class="secondary-nav__links">
                        <a href="" class="secondary-nav__link">О мануфактуре</a>
                        <a href="" class="secondary-nav__link">Изобретения</a>
                        <a href="" class="secondary-nav__link">Константин Чайкин</a>
                        <a href="" class="secondary-nav__link">Вакансии</a>
                        <a href="" class="secondary-nav__link">Философия</a>
                     </div>
                  </div>
                  <div class="secondary-nav__col">
                     <div class="secondary-nav__title">СМИ</div>
                     <div class="secondary-nav__links secondary-nav__links_single">
                        <a href="" class="secondary-nav__link">Новости</a>
                        <a href="" class="secondary-nav__link">Блог</a>
                        <a href="" class="secondary-nav__link">Медиатека</a>
                     </div>
                  </div>
                  <div class="secondary-nav__col">
                     <div class="secondary-nav__title">ДЛЯ КЛИЕНТОВ</div>
                     <div class="secondary-nav__links">
                        <a href="" class="secondary-nav__link">Как купить?</a>
                        <a href="" class="secondary-nav__link">Сервис</a>
                        <a href="" class="secondary-nav__link">Ритейлеры</a>
                        <a href="" class="secondary-nav__link">Клуб Чайкина</a>
                     </div>
                  </div>
               </div>
               <div class="secondary-nav__btns">
                  <a href="#" class="button button_orange">КОНСТРУКТОР РИСТМОНОВ</a>
                  <a href="#" class="button button_orange">ИНТЕРНЕТ - МАГАЗИН</a>
               </div>
            </div>
            <div class="navigation__footer">
               <div class="navigation__adress">
                  Россия. Москва, ул. Речников 15 стр. 2
                  <a href="">Контакты</a>
               </div>
               <div class="navigation__socials">
                  <a href="">
                     <i class="icon-instagram"></i>
                  </a>
                  <a href="">
                     <i class="icon-penterest"></i>
                  </a>
                  <a href="">
                     <i class="icon-vk"></i>
                  </a>
                  <a href="">
                     <i class="icon-youtube"></i>
                  </a>
                  <a href="">
                     <i class="icon-telegram"></i>
                  </a>
               </div>
            </div>
         </div>
      </div>
   </header>
   <div id="viewer" style="width:100%; height:100vh;">
      <canvas id="scene"></canvas>
   </div>
   <script src="https://unpkg.com/three@0.140.0/build/three.min.js"></script>
   <script src="https://unpkg.com/three@0.140.0/examples/js/loaders/GLTFLoader.js"></script>
   <script src="https://unpkg.com/three@0.140.0/examples/js/controls/OrbitControls.js"></script>
   <script src="https://unpkg.com/three@0.140.0/examples/js/loaders/RGBELoader.js"></script>

   <style>
      #viewer {
         width: 100%;
         height: 100vh;
      }
   </style>



   <script>
      const container = document.getElementById('viewer');
      const canvas = document.getElementById('scene');

      // Сцена
      const scene = new THREE.Scene();

      // Камера (фиксированный FOV!)
      const camera = new THREE.PerspectiveCamera(10, container.clientWidth / container.clientHeight, 0.1, 1000);
      camera.position.set(0, 0, 2);

      // Рендерер
      const renderer = new THREE.WebGLRenderer({
         canvas,
         antialias: true,
         alpha: true
      });
      renderer.setSize(container.clientWidth, container.clientHeight);
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.outputEncoding = THREE.sRGBEncoding;

      // Контролы
      const controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableZoom = false;
      controls.enablePan = false;
      controls.enableDamping = true;

      // HDRI
      const textureLoader = new THREE.TextureLoader();
      textureLoader.load('/static/model/bg.png', function(pngTexture) {
         pngTexture.mapping = THREE.EquirectangularReflectionMapping;
         const pmremGenerator = new THREE.PMREMGenerator(renderer);
         const envMap = pmremGenerator.fromEquirectangular(pngTexture).texture;
         scene.environment = envMap;
         pmremGenerator.dispose();
      });

      // Свет
      scene.add(new THREE.AmbientLight(0xffffff, 1));

      const dir1 = new THREE.DirectionalLight(0xffffff, 1);
      dir1.position.set(20, 20, 50);
      scene.add(dir1);

      const dir2 = new THREE.DirectionalLight(0xffffff, 0.6);
      dir2.position.set(-50, -50, 100);
      scene.add(dir2);


      //------------------------------------------------------------
      // Функция адаптивной подстройки камеры
      //------------------------------------------------------------
      function fitCameraToObject(camera, object, offset = 1.5) {
         const box = new THREE.Box3().setFromObject(object);

         const size = box.getSize(new THREE.Vector3());
         const center = box.getCenter(new THREE.Vector3());

         const maxDim = Math.max(size.x, size.y, size.z);

         // вычисляем расстояние, при котором объект входит в кадр
         const fov = camera.fov * (Math.PI / 180);
         let cameraZ = (maxDim / 2) / Math.tan(fov / 2);

         cameraZ *= offset; // запас

         camera.position.set(center.x, center.y, cameraZ + center.z);
         camera.lookAt(center);

         camera.updateProjectionMatrix();
      }


      //------------------------------------------------------------
      // Загрузка модели
      //------------------------------------------------------------
      let watch = null;

      const loader = new THREE.GLTFLoader();
      loader.load('/static/model/model.glb', function(gltf) {
         watch = gltf.scene;
         scene.add(watch);

         // автоцентрирование + авто-расстояние камеры
         fitCameraToObject(camera, watch);
      });


      //------------------------------------------------------------
      // Анимация
      //------------------------------------------------------------
      function animate() {
         requestAnimationFrame(animate);
         controls.update();
         renderer.render(scene, camera);
      }
      animate();


      //------------------------------------------------------------
      // Адаптивный ресайз
      //------------------------------------------------------------
      function onWindowResize() {
         const width = container.clientWidth;
         const height = container.clientHeight;

         camera.aspect = width / height;
         camera.updateProjectionMatrix();
         renderer.setSize(width, height);

         // повторно подстраиваем дистанцию
         if (watch) fitCameraToObject(camera, watch);
      }

      window.addEventListener('resize', onWindowResize);
   </script>
</body>

</html>