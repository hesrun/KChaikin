"use strict";function checkMediaQuery(){screenSize<md?$(".navigation__head").prepend($("#searchForm")):$(".header__search").prepend($("#searchForm")),screenSize<sm&&$(".productRequest").click(function(){$("#productRequestModal").modal({fadeDuration:300})})}function heroBannerAnimation(){var e=$(".hero-banner__info > *"),t=$(".hero-banner__image");if(gsap.registerPlugin(ScrollTrigger),screenSize>md){gsap.timeline().from(e,{x:-200,duration:.5,opacity:0,stagger:.1}).from(t,{x:200,duration:.5,opacity:0,delay:-.3})}}function slideRestimons(){function e(){t.removeClass("active previous"),$(t[n]).addClass("active"),$(t[a]).addClass("previous"),a=n,n=(n+1)%t.length,setTimeout(function(){$(t[a]).removeClass("previous")},i)}var t=$(".restimons-builder__image img"),i=1e3,n=0,a=t.length-1;setInterval(e,1500)}function restimonsParallax(){var e=$(".restimons-builder__info > *").not(".restimons-builder__image"),t=$(".restimons-builder__image"),i=$(".restimons-builder").height(),n=$(".restimons-builder");console.log(i),gsap.registerPlugin(ScrollTrigger),screenSize>md&&(gsap.from(t,{y:-i,duration:10,ease:"none",scrollTrigger:{trigger:n,start:"top bottom",end:"bottom bottom",scrub:!0}}),gsap.from(e,{x:-100,opacity:0,duration:.3,stagger:.2,scrollTrigger:{trigger:n,start:"top center",end:"bottom bottom"}}))}function initParallaxMozaik(){$(".chaykin-mozaik-section").mousemove(function(e){var t=$(".chaykin-mozaik-section")[0].getBoundingClientRect(),i=t.left,n=t.top,a=window.scrollX||document.documentElement.scrollLeft,o=window.scrollY||document.documentElement.scrollTop,r=e.pageX-(i+a),s=e.pageY-(n+o);gsap.to(".chaykin-mozaik__image",{"--x":"".concat(r,"px"),"--y":"".concat(s,"px"),duration:1,ease:"power1.out"})})}function initNewItemsAnimation(){var e=$(".new-items-list__item"),t=$(".new-items-section"),i=$(".new-items-section .full-title__image");if(gsap.registerPlugin(ScrollTrigger),screenSize>md){gsap.timeline({scrollTrigger:{trigger:t,start:"top bottom",end:"80% 80%",scrub:!0}}).from(i,{y:600,duration:.5}).from(e,{y:300,duration:.5,opacity:0,stagger:.05,ease:"power2.out"})}}function openPreview(){var e=$(".new-items-section"),t=$(".new-items-preview"),i=0,n=0;$(".new-items-list__item").on("click",function(a){if(screenSize>lg){a.preventDefault(),$(".new-items-preview__item").hide(),$(".new-items-preview__item").eq($(this).index()).show();var o=e.offset();i=a.pageX-o.left,n=a.pageY-o.top,t.css("visibility","visible"),gsap.fromTo(t,{clipPath:"circle(0 at ".concat(i,"px ").concat(n,"px)"),ease:"none",duration:1},{clipPath:"circle(150% at ".concat(i,"px ").concat(n,"px)"),ease:"none",duration:1})}}),$(".new-items-preview__close").on("click",function(){console.log(i,n),gsap.fromTo(t,{clipPath:"circle(150% at ".concat(i,"px ").concat(n,"px)"),ease:"none",duration:1},{clipPath:"circle(0% at ".concat(i,"px ").concat(n,"px)"),ease:"none",duration:1})})}function masterParallax(){var e=$(".master-parallax"),t=$(".master-parallax__image"),i=$(".master-parallax .full-title"),n=$(".master-parallax .full-title__image");gsap.registerPlugin(ScrollTrigger),screenSize>md&&(gsap.from(t,{y:-600,duration:1,scrollTrigger:{trigger:e,start:"top bottom",end:"bottom center",scrub:!0}}),gsap.from(n,{y:300,duration:1,scrollTrigger:{trigger:i,start:"top bottom",end:"bottom bottom-=200",scrub:!0}}))}function captionsInit(){var e=!1,t=$(".work-detail-image");$(".work-detail-image-btns__item").on("click",function(e){var i=$(this).data("id"),n=$(this),a=$('.work-detail-caption__item[data-id="'+i+'"]');$(".work-detail-image-btns__item").not(n).removeClass("open"),$(".work-detail-caption__item").not(a).removeClass("open");var o=!a.hasClass("open");n.toggleClass("open",o),a.toggleClass("open",o),o&&$(window).width()>820?positionCaptionNearButton(n,a,t):a.css({position:"",top:"",left:""})}),$(".work-detail-caption__item .button_small").on("click",function(e){e.stopPropagation();var t=$(this).closest(".work-detail-caption__item"),i=t.data("id"),n=$('.work-detail-image-btns__item[data-id="'+i+'"]');t.removeClass("open"),n.removeClass("open"),t.css({position:"",top:"",left:""})}),$("#hideCaptions").on("click",function(){e=!e;var t=$(this).find(".button__text");$(".work-detail-image-btns").fadeToggle(),$(".work-detail-caption__item.open").length>0&&($(".work-detail-caption__item").removeClass("open"),$(".work-detail-image-btns__item").removeClass("open"),$(".work-detail-caption__item").css({position:"",top:"",left:""})),e?t.text("Show captions"):t.text("Hide captions")})}function positionCaptionNearButton(e,t,i){var n=e.offset(),a=i.offset(),o=n.top-a.top,r=n.left-a.left,s=i.width(),l=r,c=o,d=t.width()/2;r<d&&(l=r+d),s-r<d&&(l=r-d),t.css({position:"absolute",top:c+"px",left:l+"px"})}function initGumAnimations(){gsap.fromTo(".parallax-banner__img img",{yPercent:0},{yPercent:20,duration:.3,scrollTrigger:{trigger:".parallax-banner",start:"bottom 100%",end:"bottom top",scrub:!0}}),$(".parralax-block").each(function(){var e=$(this),t=e.find("img");gsap.fromTo(t,{yPercent:-30},{yPercent:0,duration:.3,scrollTrigger:{trigger:e,start:"top 100%",end:"bottom 0",scrub:!0}})}),ScrollTrigger.matchMedia({"(min-width: 768px)":function(){$(".parallax-lines__line").each(function(e){var t=$(this),i=e+1;gsap.fromTo(t,{xPercent:i%2?25:-25},{xPercent:0,duration:.3,scrollTrigger:{trigger:t,start:"top 100%",end:"bottom 70%",scrub:!0}})})}})}function gumResponsiveInit(){var e=$(window).width();$(".banner-place").each(function(){var t=$(this),i=t.find(".banner-place__img"),n=t.find(".banner-place__container"),a=t.find(".banner-place__title");e<=768?i.find(".banner-place__title").length||a.appendTo(i):n.find(".banner-place__title").length||a.prependTo(n)})}function venusAnimations(){gsap.to(".venus-hero__header",{yPercent:100,opacity:0,duration:.3,scrollTrigger:{trigger:document.body,start:"0 0",end:"bottom +=100vh",scrub:!0}}),gsap.fromTo(".venus-hero__bg img",{yPercent:0},{yPercent:30,duration:.3,scrollTrigger:{trigger:document.body,start:"0 0",end:"200% +=200vh",scrub:!0}})}var headerHeight=$(".header").height(),screenSize=window.innerWidth,md=768,sm=576,lg=992,currentSlide=0,getScrollbarWidth=function(){return window.innerWidth-document.documentElement.clientWidth};$("body").css({"--sw":getScrollbarWidth()+"px"}),window.addEventListener("resize",function(){screenSize=window.innerWidth,checkMediaQuery()});var photoCarusel=new Swiper(".photo-carusel",{slidesPerView:"auto",spaceBetween:10,pagination:{el:".photo-carusel-nav__pagination",clickable:!0},navigation:{prevEl:".photo-carusel-nav__prev",nextEl:".photo-carusel-nav__next"},breakpoints:{768:{slidesPerView:3,spaceBetween:20}}});$().fancybox({selector:'[data-fancybox="gallery"]',hideScrollbar:!1,thumbs:!1,beforeClose:function(e){console.info(e.currIndex),photoCarusel.slideTo(e.currIndex,0)}}),$().fancybox({selector:'[data-fancybox="gum"]'});var photoSlider=new Swiper(".photo-slider",{slidesPerView:"auto",spaceBetween:15,pagination:{el:".photo-carusel-nav__pagination",clickable:!0},navigation:{prevEl:".photo-carusel-nav__prev",nextEl:".photo-carusel-nav__next"},breakpoints:{0:{enabled:!1},769:{enabled:!0,slidesPerView:"auto",spaceBetween:30}}}),dateCarusel=new Swiper(".date-list",{slidesPerView:"auto",freeMode:!0,spaceBetween:0,mousewheel:!0}),inventSlider=new Swiper(".invent-modal-slider",{slidesPerView:1,spaceBetween:0,loop:!0,pagination:{el:".photo-carusel-nav__pagination",clickable:!0},navigation:{prevEl:".photo-carusel-nav__prev",nextEl:".photo-carusel-nav__next"}}),newItemsSwiper=new Swiper(".new-items-list",{spaceBetween:0,centeredSlides:!0,slidesPerView:"auto",breakpoints:{768:{centeredSlides:!1,slidesPerView:4,spaceBetween:30}}});$(document).on("click",".date-list .swiper-slide",function(e){e.preventDefault(),$(".date-list__item").removeClass("date-list__item_active"),$(this).find(".date-list__item").addClass("date-list__item_active");var t=$(this).attr("cont");$.get("",{year:t},function(e){$(".manuf-history, .expand-history").fadeOut("normal",function(){$(".manuf-history, .expand-history").remove(),$(e).insertAfter(".date-list")})}),$(this).index()>currentSlide?(dateCarusel.slideTo($(this).index(),300),currentSlide=$(this).index()):(dateCarusel.slideTo($(this).index()-1,300),currentSlide=$(this).index())});var storesCarusel=new Swiper(".stores-carusel",{slidesPerView:"auto",spaceBetween:20,pagination:{el:".photo-carusel-nav__pagination",clickable:!0},navigation:{prevEl:".photo-carusel-nav__prev",nextEl:".photo-carusel-nav__next"},breakpoints:{768:{slidesPerView:2}}});$(window).scroll(function(){$(window).scrollTop()>=headerHeight?$(".header").addClass("header_scrolled"):$(".header").removeClass("header_scrolled")}),$(".header-burger").click(function(){$(this).toggleClass("header-burger_active"),$("body").toggleClass("lock"),$(".header").toggleClass("header_open"),$("#menu").fadeToggle(200),$(this).hasClass("header-burger_active")?$(".header-burger__text").text("закрыть"):$(".header-burger__text").text("меню")}),$(".language-select__current").click(function(){$(".language-select__drop").slideToggle(200)}),$(".main-nav__link_has-sub").click(function(){if(screenSize<md)return $(this).next().slideToggle(),!1}),$(document).click(function(e){var t=$("#searchForm"),i=$("#searchOpen");1===i.has(e.target).length&&screenSize>md&&t.fadeIn(300),0===t.has(e.target).length&&0===i.has(e.target).length&&screenSize>md&&t.fadeOut(300)}),$(".header__search-input").on("paste keyup",function(){$(this).val().length>=1?$(".header__search-drop").fadeIn(200):$(".header__search-drop").fadeOut(200)}),checkMediaQuery(),$(".text-reveal-anim").each(function(){var e=$(this),t=e.text().trim(),i=t.split(/\s+/);e.empty(),i.forEach(function(t){var i=$("<span/>").text(t);e.append(i).append(" ")}),gsap.registerPlugin(ScrollTrigger),screenSize>md&&gsap.to(".text-reveal-anim span",{duration:.3,opacity:1,ease:"none",stagger:.1,scrollTrigger:{trigger:e,start:"top 100%",end:"bottom 70%",scrub:!0}})}),$(".expand-vacation").click(function(){var e=$(this),t=e.closest(".vacancy-item").find(".vacancy-item__full");return t.is(":visible")?e.html('Подробнее <i class="icon icon-arrow-down"></i>'):e.html('Свернуть <i class="icon icon-arrow-down" style="transform: rotateX(180deg)"></i>'),t.slideToggle(300),!1}),$(document).on("click",".expand-history",function(){$(".manuf-history").toggleClass("manuf-history_all"),$(".manuf-history").hasClass("manuf-history_all")?$(this).html('Скрыть <i class="icon icon-arrow-down" style="transform: rotateX(180deg)"></i>'):$(this).html('Показать ещё <i class="icon icon-arrow-down" ></i>')}),$(document).on("click",".expand-series-text",function(){$(".series-text__collapse").toggleClass("series-text__collapse_full"),$(".series-text__collapse").hasClass("series-text__collapse_full")?$(this).html('Скрыть <i class="icon icon-arrow-down" style="transform: rotateX(180deg)"></i>'):$(this).html('Показать ещё <i class="icon icon-arrow-down" ></i>')}),$(".faq-accordion__title").click(function(){$(this).toggleClass("faq-accordion__title_active"),$(this).next().slideToggle(300)}),$(".sorting__btn").click(function(){$(".sorting__drop").fadeToggle(200)}),$(".sorting__option").click(function(){var e=$(this).find(".sorting__value").text().trim();$(".sorting__current").text(e),$(".sorting__drop").fadeOut(200)}),$(document).click(function(e){$(".sorting__drop")}),$("#addCart").click(function(){$("#cart").modal({fadeDuration:300,showClose:!1})}),$("#showParams").click(function(){$("#techModal").modal({fadeDuration:300})}),$(document).on("click",".requestVacancy",function(e){return $("#vacancyModal").find("#VACANCY").val($(this).attr("val")),$("#vacancyModal").modal({fadeDuration:300}),!1}),$(".queueModalOpen").click(function(){return $("#queueModal").modal({fadeDuration:300}),!1}),$(".feedBackModalOpen").click(function(){return $("#feedBackModal").modal({fadeDuration:300}),!1}),$(".feedBackModalOpen").click(function(){return $("#feedBackModal").modal({fadeDuration:300}),!1}),$(".openVideoModal").click(function(){return $("#videoModal").modal({fadeDuration:300}),!1}),$("#formSuccessModal").modal({fadeDuration:300}),$(".media-card").click(function(){$("#inventModal").modal({fadeDuration:300})}),$("#codeModal").modal(),$(".toJoinClub").click(function(){var e=$(this).attr("attr-modal");$("#".concat(e)).modal({fadeDuration:300})}),$(".с-select select").select2({width:"style",minimumResultsForSearch:1/0,dropdownParent:$(".с-select")}).on("select2:select",function(e){$(e.target).parent(".с-select").find(".с-select__label").addClass("с-select__label_choised")}),$("input[name='payment']").change(function(){$("#card").is(":checked")?$(".checkout__pay-card-form").slideDown():$(".checkout__pay-card-form").slideUp()}),$(".order-item__title").click(function(){$(this).next().slideToggle()});var phoneInput=document.querySelector("#phone");phoneInput&&window.intlTelInput(phoneInput,{initialCountry:"RU",strictMode:!0,utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/23.0.10/js/utils.min.js"}),heroBannerAnimation(),slideRestimons(),restimonsParallax(),initParallaxMozaik(),initNewItemsAnimation(),openPreview(),masterParallax(),$(".button").each(function(){$(this).html('<span class="button__text">'+$(this).html()+"</span>")}),$(".tabs-list__btn").on("click",function(){var e=$(this),t=e.index(),i=$(this).closest(".tabs-list"),n=Math.floor(e.offset().left-i.offset().left+i.scrollLeft());i.animate({scrollLeft:n},300),$(".tabs-list__btn").removeClass("tabs-list__btn_active"),$(".tab-content").removeClass("tab-content_active"),e.addClass("tabs-list__btn_active"),$(".tab-content").eq(t).addClass("tab-content_active")}),captionsInit(),new AirDatepicker("#datePicker"),gumResponsiveInit(),venusAnimations(),$(window).on("resize",function(){gumResponsiveInit()}),$(document).ready(function(){initGumAnimations()});